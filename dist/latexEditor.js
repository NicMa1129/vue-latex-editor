!function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";var r=n(2);n.n(r).a},function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"latex-editor-container"},[n("div",{staticClass:"latex-editer__input",style:t.customInputStyle,attrs:{id:t.id}}),t._v(" "),n("div",{class:["latex-editer__tool-container",t.showTool?"show":""],style:t.customContainerStyle},[t.showBar?n("div",{staticClass:"latex-editer__tool-bar"},[n("ul",{staticClass:"latex-editer__tabs"},t._l(t.mainData,function(e){return n("li",{key:e.id,class:["latex-editer__bar-btn",e.active?"active":""],on:{click:function(n){n.stopPropagation(),t.changeTab(e.id)}}},[t._v(t._s(e.id))])}))]):t._e(),t._v(" "),n("div",{staticClass:"latex-editer__main-wrap"},t._l(t.mainData,function(e){return n("div",{key:"tab"+e.id,class:["latex-editer__meta-tab",e.active?"active":""]},[n("ul",{staticClass:"latex-editer__meta-wrap"},t._l(e.metas,function(r){return n("li",{key:r.key,staticClass:"latex-editer__meta-sel",style:t.customSelStyle,on:{click:function(e){e.stopPropagation(),t.metaClick(r.value.latex)}}},[n("span",{staticClass:"latex-editer__meta-sel-inner",attrs:{id:t.id+"_"+e.id+"_"+r.key}},[t._v(t._s(r.value.icon))])])}))])}))])])};r._withStripped=!0;var a=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=t[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{!r&&l.return&&l.return()}finally{if(a)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(t){return"[object object]"===Object.prototype.toString.call(t).toLowerCase()},o=function(t){var e="",n=!0,r=!1,i=void 0;try{for(var o,l=Object.entries(t)[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var s=o.value,c=a(s,2);e+=c[0]+":"+c[1]+";"}}catch(t){r=!0,i=t}finally{try{!n&&l.return&&l.return()}finally{if(r)throw i}}return e},l=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=t[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{!r&&l.return&&l.return()}finally{if(a)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s={name:"LatexEditor",data:function(){return{mainData:[],showTool:!1,showBar:!0}},props:{id:{type:String,required:!0},toolBar:{type:Array},formulas:{type:Object,required:!0},edit:{type:Function},customInputStyle:{type:Object},customContainerStyle:{type:Object},customSelStyle:{type:Object}},created:function(){this.initData()},mounted:function(){this.initMathField()},beforeDestroy:function(){this.removeEvent()},methods:{initData:function(){var t=this,e=[],n=Object.entries(this.formulas),r=function(t,n){e.find(function(e){return e.key===t})||e.push({key:t,value:n})},a=!0,i=!1,o=void 0;try{for(var s,c=n[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var u=s.value,f=l(u,2);r(f[0],f[1])}}catch(n){i=!0,o=n}finally{try{!a&&c.return&&c.return()}finally{if(i)throw o}}if(this.toolBar){var d=this.toolBar.filter(function(t){return""!==t});d&&0<d.length&&function(t){var e=[],n=!0,r=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var l=i.value;e.includes(l)||e.push(l)}}catch(t){r=!0,a=t}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}return e}(d).forEach(function(n,r){var a=e.filter(function(t){return t.value.tab===n}),i=!!r;t.mainData.push({id:n,active:!i,metas:a})})}else this.showBar=!1,this.mainData.push({id:"tab1",active:!0,metas:e})},initMathField:function(){this.answerSpan=document.getElementById(this.id);var t={handlers:{edit:this.edit||function(t){console.log(t.latex())}}};this.MQ=MathQuill.getInterface(2),this.answerMathField=this.MQ.MathField(this.answerSpan,t),this.setMeta(),this.bindEvent()},setMeta:function(){var t=this,e=MathQuill.getInterface(2);this.mainData.forEach(function(n){n.metas.forEach(function(r){var a=t.id+"_"+n.id+"_"+r.key,o=document.getElementById(a),l=e.StaticMath(o);r.value.style&&i(r.value.style)&&t.setMetaCustonStyle(r.value.style,l.el())})})},setMetaCustonStyle:function(t,e){var n=e.children,r=n[n.length-1];t.root&&i(t.root)&&(e.style.cssText=o(t.root)),t.inner&&i(t.inner)&&(r.style.cssText=o(t.inner)),t.matrix&&i(t.matrix)&&Array.from(r.children).forEach(function(e){1!==e.className.indexOf("mq-matrix")&&(e.style.cssText=o(t.matrix))})},bindEvent:function(){this.answerSpan.addEventListener("focus",this.answerSpanFocusCallback,!0),this.answerSpan.addEventListener("click",this.answerSpanClickCallback),document.getElementsByTagName("body")[0].addEventListener("click",this.bodyClickCallback)},removeEvent:function(){this.answerSpan.removeEventListener("focus",this.answerSpanFocusCallback,!0),this.answerSpan.removeEventListener("click",this.answerSpanClickCallback),document.getElementsByTagName("body")[0].removeEventListener("click",this.bodyClickCallback)},answerSpanFocusCallback:function(t){var e=this,n=this.$parent.$children;1<n.length&&n.forEach(function(t){t._uid!==e._uid&&(t.showTool=!1)}),this.showTool=!0},answerSpanClickCallback:function(t){t.stopPropagation()},bodyClickCallback:function(t){t.stopPropagation(),this.showTool=!1},metaClick:function(t){this.answerMathField.write(t),this.answerMathField.focus()},changeTab:function(t){this.mainData.find(function(t){return t.active}).id!==t&&this.mainData.forEach(function(e,n){e.id===t?e.active=!0:e.active&&(e.active=!1)}),this.answerMathField.focus()},getValue:function(){return this.answerMathField.latex()}}};n(0);var c=function(t,e,n,r,a,i,o,l){var s,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=[],c._compiled=!0),c._scopeId="data-v-"+i,s)if(c.functional){c._injectStyles=s;var u=c.render;c.render=function(t,e){return s.call(e),u(t,e)}}else{var f=c.beforeCreate;c.beforeCreate=f?[].concat(f,s):[s]}return{exports:t,options:c}}(s,r,0,0,0,"6a7f7038");c.options.__file="src/component/LatexEditor.vue";var u=c.exports;u.install=function(t){t.component(u.name,u)},"undefined"!=typeof window&&window.Vue&&(window.LatexEditor=u),e.default=u},function(t,e){}]);